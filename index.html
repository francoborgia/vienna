<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vienna Guide ‚Äî Plus</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#6a85b6 0%,#bac8e0 100%);min-height:100vh;color:#333}
    .app-container{max-width:420px;margin:0 auto;background:#fff;min-height:100vh;position:relative;overflow:hidden}
    .header{background:linear-gradient(135deg,#1a237e,#3949ab);color:#fff;padding:22px;text-align:center}
    .header h1{font-size:24px;margin-bottom:6px}
    .header p{font-size:13px;opacity:.95}
    .nav-tabs{display:flex;background:#f6f7fb;border-bottom:1px solid #e5e7eb}
    .nav-tab{flex:1;padding:14px 10px;text-align:center;background:none;border:none;cursor:pointer;font-size:14px;transition:.2s;border-bottom:3px solid transparent}
    .nav-tab.active{background:#fff;border-bottom-color:#1a237e;color:#1a237e;font-weight:600}
    .content{padding:18px;height:calc(100dvh - 160px);overflow-y:auto}
    .card{background:#fff;border-radius:14px;padding:14px;margin-bottom:14px;box-shadow:0 6px 14px rgba(0,0,0,.08);transition:transform .18s, box-shadow .18s}
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(0,0,0,.12)}
    .card-header{display:flex;align-items:center;margin-bottom:8px}
    .card-icon{width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:12px;font-size:19px}
    .attraction-icon{background:#1a237e;color:#fff}
    .parking-icon{background:#2e7d32;color:#fff}
    .electric-icon{background:#1565c0;color:#fff}
    .food-icon{background:#8b5cf6;color:#fff}
    .extra-icon{background:#ef6c00;color:#fff}
    .card-title{font-size:16px;font-weight:700;color:#222}
    .card-subtitle{font-size:12px;color:#6b7280;margin-top:2px}
    .card-description{font-size:14px;color:#4b5563;line-height:1.45;margin:10px 0}
    .card-info{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    .tag{background:#f3f4f6;padding:4px 8px;border-radius:999px;font-size:12px;color:#6b7280}
    .tag.free{background:#dcfce7;color:#166534}
    .tag.paid{background:#fee2e2;color:#991b1b}
    .tag.fast{background:#dbeafe;color:#1e40af}
    .tag.walk{background:#e0f2fe;color:#075985}
    .tag.pt{background:#ecfccb;color:#3f6212}
    .tag.drive{background:#fee2e2;color:#9f1239}
    .distance{font-size:12px;color:#2e7d32;font-weight:700}
    .stars{color:#f59e0b;font-size:14px}
    .hidden{display:none}
    .search-box{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:10px;margin-bottom:14px;font-size:14px}
    .filters{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap}
    .filter-btn{padding:8px 12px;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:999px;font-size:12px;cursor:pointer;transition:.2s}
    .filter-btn.active{background:#1a237e;color:#fff;border-color:#1a237e}
    .floating-btn{position:fixed;bottom:20px;right:20px;width:56px;height:56px;background:#1a237e;border:none;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,.25);transition:.2s;z-index:1000}
    .floating-btn:hover{transform:scale(1.08)}

    /* Detail pages */
    .detail-page{position:absolute;top:0;left:0;width:100%;height:100%;background:#fff;z-index:1000;transform:translateX(100%);transition:transform .28s ease;overflow-y:auto}
    .detail-page.active{transform:translateX(0)}
    .detail-header{background:linear-gradient(135deg,#1a237e,#3949ab);color:#fff;padding:20px;position:relative}
    .back-btn{position:absolute;left:14px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.2);border:none;color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer;font-size:18px}
    .detail-content{padding:18px}
    .detail-image{width:100%;height:200px;object-fit:cover;border-radius:12px;margin:12px 0}
    .detail-title{font-size:22px;font-weight:800;color:#111;margin:6px 0}
    .detail-subtitle{font-size:14px;color:#6b7280;margin-bottom:12px}
    .detail-text{font-size:15px;color:#374151;line-height:1.6;margin-bottom:16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:6px}
    .info{background:#f8fafc;padding:14px;border-radius:10px;text-align:center}
    .info .i{font-size:22px;margin-bottom:6px}
    .go-btn{width:100%;background:linear-gradient(135deg,#2e7d32,#43a047);color:#fff;border:none;padding:14px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;margin-top:16px}

    .notice{background:#e3f2fd;padding:10px;border-radius:10px;margin-bottom:12px;border-left:4px solid #2196f3;font-size:13px;color:#0f172a}

    /* Weather */
    .weather{display:flex;gap:10px;align-items:center;background:#eef2ff;border:1px solid #c7d2fe;border-left:4px solid #6366f1;padding:10px;border-radius:12px;margin:10px 0}
    .weather .now{display:flex;align-items:center;gap:10px}
    .weather .temp{font-size:22px;font-weight:800}
    .weather .desc{font-size:12px;color:#374151}
    .hourly{display:flex;gap:8px;overflow-x:auto;padding-bottom:4px;margin-top:8px}
    .hchip{min-width:64px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:10px;padding:6px;text-align:center;font-size:12px}
  </style>
</head>
<body>
<div class="app-container">
  <div class="header">
    <h1>üéª Vienna Guide</h1>
    <p>Storia imperiale, arte, caff√® ‚Äî ora con meteo e food</p>
  </div>

  <div class="nav-tabs" role="tablist" aria-label="Sezioni">
    <button class="nav-tab active" role="tab" aria-current="page" onclick="showTab('attractions', event)">üèõÔ∏è Attrazioni</button>
    <button class="nav-tab" role="tab" onclick="showTab('food', event)">üçΩÔ∏è Ristoranti</button>
    <button class="nav-tab" role="tab" onclick="showTab('parking', event)">üÖøÔ∏è Parcheggi</button>
    <button class="nav-tab" role="tab" onclick="showTab('electric', event)">üîå Elettrico</button>
    <button class="nav-tab" role="tab" onclick="showTab('extra', event)">üé¢ Extra</button>
  </div>

  <div class="content">
    <!-- METEO -->
    <div id="weather" class="weather">
      <div class="now">
        <div id="w-icon">‚õÖ</div>
        <div>
          <div class="temp" id="w-temp">--¬∞C</div>
          <div class="desc" id="w-desc">Meteo in caricamento‚Ä¶</div>
        </div>
      </div>
    </div>
    <div id="hourly" class="hourly"></div>

    <div class="notice" id="location-status">üìç Attivazione GPS per calcolo distanze‚Ä¶</div>

    <!-- ATTRAZIONI -->
    <section id="attractions-content">
      <input class="search-box" placeholder="üîç Cerca attrazioni (es. Sch√∂nbrunn)" oninput="filterContentDeb(this.value,'attractions')"/>
      <div class="filters">
        <button class="filter-btn active" onclick="filterByType('all','attractions',event)">Tutte</button>
        <button class="filter-btn" onclick="filterByType('imperiale','attractions',event)">Imperiali</button>
        <button class="filter-btn" onclick="filterByType('museo','attractions',event)">Musei</button>
        <button class="filter-btn" onclick="filterByType('panorama','attractions',event)">Panorami</button>
        <button class="filter-btn" onclick="filterByType('architettura','attractions',event)">Architettura</button>
      </div>

      <article class="card attraction-card" data-type="architettura" data-id="stephansdom" onclick="openDetail('stephansdom')">
        <div class="card-header"><div class="card-icon attraction-icon">‚õ™</div><div><div class="card-title">Cattedrale di Santo Stefano</div><div class="card-subtitle">Stephansdom ‚Ä¢ Centro storico</div></div></div>
        <p class="card-description">Il simbolo gotico di Vienna con tetto policromo. Torre sud con vista sulla Innere Stadt.</p>
        <div class="card-info"><span class="tag free">Navata gratis</span><span class="tag">‚≠ê 4.7</span><span class="distance" id="distance-stephansdom">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card attraction-card" data-type="imperiale" data-id="schoenbrunn" onclick="openDetail('schoenbrunn')">
        <div class="card-header"><div class="card-icon attraction-icon">üè∞</div><div><div class="card-title">Palazzo di Sch√∂nbrunn</div><div class="card-subtitle">Residenza imperiale ‚Ä¢ Hietzing</div></div></div>
        <p class="card-description">Residenza estiva degli Asburgo con giardini barocchi, Gloriette e zoo storico.</p>
        <div class="card-info"><span class="tag paid">Tour a pagamento</span><span class="tag">‚≠ê 4.8</span><span class="distance" id="distance-schoenbrunn">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card attraction-card" data-type="museo" data-id="belvedere" onclick="openDetail('belvedere')">
        <div class="card-header"><div class="card-icon attraction-icon">üñºÔ∏è</div><div><div class="card-title">Belvedere</div><div class="card-subtitle">Museo d'arte ‚Ä¢ Klimt</div></div></div>
        <p class="card-description">Belvedere Superiore/Inferiore con ‚ÄúIl Bacio‚Äù di Klimt e arte austriaca.</p>
        <div class="card-info"><span class="tag paid">Biglietto</span><span class="tag">‚≠ê 4.7</span><span class="distance" id="distance-belvedere">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card attraction-card" data-type="panorama" data-id="prater" onclick="openDetail('prater')">
        <div class="card-header"><div class="card-icon attraction-icon">üé°</div><div><div class="card-title">Prater & Ruota Panoramica</div><div class="card-subtitle">Wurstelprater ‚Ä¢ Leopoldstadt</div></div></div>
        <p class="card-description">Parco storico con la Riesenrad del 1897 e viali alberati.</p>
        <div class="card-info"><span class="tag free">Parco pubblico</span><span class="tag">‚≠ê 4.6</span><span class="distance" id="distance-prater">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card attraction-card" data-type="museo" data-id="mq" onclick="openDetail('mq')">
        <div class="card-header"><div class="card-icon attraction-icon">üèõÔ∏è</div><div><div class="card-title">MuseumsQuartier</div><div class="card-subtitle">Leopold Museum, mumok</div></div></div>
        <p class="card-description">Grande polo culturale con corti vivaci, arte moderna e caff√®.</p>
        <div class="card-info"><span class="tag paid">Musei</span><span class="tag">‚≠ê 4.6</span><span class="distance" id="distance-mq">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card attraction-card" data-type="architettura" data-id="hundert" onclick="openDetail('hundert')">
        <div class="card-header"><div class="card-icon attraction-icon">üé®</div><div><div class="card-title">Hundertwasserhaus</div><div class="card-subtitle">Architettura organica ‚Ä¢ Landstra√üe</div></div></div>
        <p class="card-description">Colori vivaci, linee curve e terrazze alberate: un'icona pop.</p>
        <div class="card-info"><span class="tag free">Visita esterna</span><span class="tag">‚≠ê 4.5</span><span class="distance" id="distance-hundert">üìç Calcolo‚Ä¶</span></div>
      </article>
    </section>

    <!-- FOOD -->
    <section id="food-content" class="hidden">
      <input class="search-box" placeholder="üîç Cerca ristoranti (es. schnitzel, fast food)" oninput="filterContentDeb(this.value,'food')"/>
      <div class="filters">
        <button class="filter-btn active" onclick="filterByType('all','food',event)">Tutti</button>
        <button class="filter-btn" onclick="filterByType('tipico','food',event)">Tipici</button>
        <button class="filter-btn" onclick="filterByType('fast','food',event)">Fast Food</button>
        <button class="filter-btn" onclick="filterByType('caff√®','food',event)">Caff√® storici</button>
      </div>

      <article class="card food-card" data-type="tipico" data-id="figlmueller" onclick="openDetail('figlmueller')">
        <div class="card-header"><div class="card-icon food-icon">ü•©</div><div><div class="card-title">Figlm√ºller B√§ckerstra√üe</div><div class="card-subtitle">Schnitzel gigante ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Il pi√π celebre schnitzel viennese. Meglio prenotare.</p>
        <div class="card-info"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.6</span><span class="distance" id="distance-figlmueller">üìç Calcolo‚Ä¶</span><span class="tag" id="mode-figlmueller">‚Äî</span></div>
      </article>

      <article class="card food-card" data-type="tipico" data-id="plachutta" onclick="openDetail('plachutta')">
        <div class="card-header"><div class="card-icon food-icon">üç≤</div><div><div class="card-title">Plachutta Wollzeile</div><div class="card-subtitle">Tafelspitz ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Brodo e bollito alla viennese, servizio classico.</p>
        <div class="card-info"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.5</span><span class="distance" id="distance-plachutta">üìç Calcolo‚Ä¶</span><span class="tag" id="mode-plachutta">‚Äî</span></div>
      </article>

      <article class="card food-card" data-type="caff√®" data-id="cafecentral" onclick="openDetail('cafecentral')">
        <div class="card-header"><div class="card-icon food-icon">‚òï</div><div><div class="card-title">Caf√© Central</div><div class="card-subtitle">Caff√® storico ‚Ä¢ Ring</div></div></div>
        <p class="card-description">Saloni storici, torte e atmosfera letteraria.</p>
        <div class="card-info"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ 4.6</span><span class="distance" id="distance-cafecentral">üìç Calcolo‚Ä¶</span><span class="tag" id="mode-cafecentral">‚Äî</span></div>
      </article>

      <article class="card food-card" data-type="fast" data-id="mcd-stephansplatz" onclick="openDetail('mcd-stephansplatz')">
        <div class="card-header"><div class="card-icon food-icon">üçî</div><div><div class="card-title">McDonald's Stephansplatz</div><div class="card-subtitle">Fast food ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Classico fast food in pieno centro.</p>
        <div class="card-info"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ 3.9</span><span class="distance" id="distance-mcd-stephansplatz">üìç Calcolo‚Ä¶</span><span class="tag" id="mode-mcd-stephansplatz">‚Äî</span></div>
      </article>

      <article class="card food-card" data-type="fast" data-id="bk-prater" onclick="openDetail('bk-prater')">
        <div class="card-header"><div class="card-icon food-icon">üçü</div><div><div class="card-title">Burger King ‚Äì Prater</div><div class="card-subtitle">Fast food ‚Ä¢ Leopoldstadt</div></div></div>
        <p class="card-description">Comodo se stai visitando il Prater.</p>
        <div class="card-info"><span class="stars">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ 3.8</span><span class="distance" id="distance-bk-prater">üìç Calcolo‚Ä¶</span><span class="tag" id="mode-bk-prater">‚Äî</span></div>
      </article>
    </section>

    <!-- PARCHEGGI -->
    <section id="parking-content" class="hidden">
      <input class="search-box" placeholder="üîç Cerca parcheggi (es. Park & Ride)" oninput="filterContentDeb(this.value,'parking')"/>
      <div class="filters">
        <button class="filter-btn active" onclick="filterByType('all','parking',event)">Tutti</button>
        <button class="filter-btn" onclick="filterByType('parkride','parking',event)">Park & Ride</button>
        <button class="filter-btn" onclick="filterByType('garage','parking',event)">Garage</button>
        <button class="filter-btn" onclick="filterByType('strada','parking',event)">Su strada</button>
      </div>

      <article class="card parking-card" data-type="parkride" data-id="pr-erdberg" onclick="openDetail('pr-erdberg')">
        <div class="card-header"><div class="card-icon parking-icon">üÖøÔ∏è</div><div><div class="card-title">Park & Ride Erdberg</div><div class="card-subtitle">Linea U3 ‚Ä¢ Est</div></div></div>
        <p class="card-description">Lascia l'auto e raggiungi il centro con la metro U3.</p>
        <div class="card-info"><span class="tag paid">Tariffa giornaliera</span><span class="tag">üöá U3</span><span class="distance" id="distance-pr-erdberg">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card parking-card" data-type="garage" data-id="mq-garage" onclick="openDetail('mq-garage')">
        <div class="card-header"><div class="card-icon parking-icon">üè¢</div><div><div class="card-title">Garage MuseumsQuartier</div><div class="card-subtitle">Sotto MQ ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Garage coperto centrale, accesso diretto ai musei.</p>
        <div class="card-info"><span class="tag paid">Oraria</span><span class="tag">Coperto</span><span class="distance" id="distance-mq-garage">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card parking-card" data-type="strada" data-id="kurzpark" onclick="openDetail('kurzpark')">
        <div class="card-header"><div class="card-icon parking-icon">üöè</div><div><div class="card-title">Kurzparkzone (su strada)</div><div class="card-subtitle">Zone a sosta breve ‚Ä¢ App</div></div></div>
        <p class="card-description">In molte zone interne la sosta √® a tempo. Controlla orari e durata sull'app Handyparken.</p>
        <div class="card-info"><span class="tag">‚è±Ô∏è Tempo limitato</span><span class="tag">üì± App Handyparken</span><span class="distance">üìç varie zone</span></div>
      </article>
    </section>

    <!-- ELETTRICO -->
    <section id="electric-content" class="hidden">
      <input class="search-box" placeholder="üîç Cerca stazioni di ricarica" oninput="filterContentDeb(this.value,'electric')"/>
      <div class="filters">
        <button class="filter-btn active" onclick="filterByType('all','electric',event)">Tutte</button>
        <button class="filter-btn" onclick="filterByType('fast','electric',event)">Ricarica rapida</button>
        <button class="filter-btn" onclick="filterByType('garage','electric',event)">In garage</button>
      </div>
      <div class="notice">‚ÑπÔ∏è Le tariffe e l'accesso possono variare. Verifica sempre sull'app del gestore.</div>
      <article class="card parking-card" data-type="fast" data-id="wien-energie-rathaus" onclick="openDetail('wien-energie-rathaus')">
        <div class="card-header"><div class="card-icon electric-icon">‚ö°</div><div><div class="card-title">Wien Energie ‚Äì Rathaus</div><div class="card-subtitle">Ricarica AC/DC ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Accesso con app Wien Energie o RFID.</p>
        <div class="card-info"><span class="tag fast">AC/DC</span><span class="tag">üí≥ App/RFID</span><span class="distance" id="distance-wien-energie-rathaus">üìç Calcolo‚Ä¶</span></div>
      </article>
      <article class="card parking-card" data-type="garage" data-id="garage-karteis" onclick="openDetail('garage-karteis')">
        <div class="card-header"><div class="card-icon electric-icon">üîã</div><div><div class="card-title">Garage K√§rntner Stra√üe ‚Äì EV</div><div class="card-subtitle">Sottosuolo ‚Ä¢ Centro</div></div></div>
        <p class="card-description">Stalli EV centrali, comodo per Stephansplatz.</p>
        <div class="card-info"><span class="tag">AC</span><span class="tag">Garage</span><span class="distance" id="distance-garage-karteis">üìç Calcolo‚Ä¶</span></div>
      </article>
      <article class="card parking-card" data-type="fast" data-id="tesla-vienna" onclick="openDetail('tesla-vienna')">
        <div class="card-header"><div class="card-icon electric-icon">‚ö°</div><div><div class="card-title">Tesla Supercharger ‚Äì Vienna area</div><div class="card-subtitle">Rete Tesla ‚Ä¢ Extraurbano</div></div></div>
        <p class="card-description">Verifica disponibilit√† e potenza dall'app Tesla.</p>
        <div class="card-info"><span class="tag fast">DC</span><span class="tag">üöó Tesla</span><span class="distance" id="distance-tesla-vienna">üìç Calcolo‚Ä¶</span></div>
      </article>
    </section>

    <!-- EXTRA -->
    <section id="extra-content" class="hidden">
      <div class="filters">
        <button class="filter-btn active" onclick="filterByType('all','extra',event)">Tutte</button>
        <button class="filter-btn" onclick="filterByType('parco','extra',event)">Parchi divertimento</button>
        <button class="filter-btn" onclick="filterByType('panorama','extra',event)">Panorami/Torri</button>
        <button class="filter-btn" onclick="filterByType('avventura','extra',event)">Avventura</button>
      </div>

      <article class="card extra-card" data-type="parco" data-id="prater-extra" onclick="openDetail('prater')">
        <div class="card-header"><div class="card-icon extra-icon">üé¢</div><div><div class="card-title">Wurstelprater</div><div class="card-subtitle">Luna park storico ‚Ä¢ Centro-est</div></div></div>
        <p class="card-description">Attrazioni classiche, ruota panoramica, street food.</p>
        <div class="card-info"><span class="tag walk" id="mode-prater">‚Äî</span><span class="distance" id="distance-prater-extra">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card extra-card" data-type="panorama" data-id="donauturm" onclick="openDetail('donauturm')">
        <div class="card-header"><div class="card-icon extra-icon">üóº</div><div><div class="card-title">Donauturm</div><div class="card-subtitle">Torre sul Danubio ‚Ä¢ Vista citt√†</div></div></div>
        <p class="card-description">Piattaforma panoramica con ristorante girevole.</p>
        <div class="card-info"><span class="tag" id="mode-donauturm">‚Äî</span><span class="distance" id="distance-donauturm">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card extra-card" data-type="avventura" data-id="kahlenberg-park" onclick="openDetail('kahlenberg-park')">
        <div class="card-header"><div class="card-icon extra-icon">üßó</div><div><div class="card-title">Waldseilpark Kahlenberg</div><div class="card-subtitle">Parco avventura sugli alberi</div></div></div>
        <p class="card-description">Percorsi tra gli alberi sopra Vienna. Perfetto per famiglie attive.</p>
        <div class="card-info"><span class="tag" id="mode-kahlenberg-park">‚Äî</span><span class="distance" id="distance-kahlenberg-park">üìç Calcolo‚Ä¶</span></div>
      </article>

      <article class="card extra-card" data-type="panorama" data-id="rax-seilbahn" onclick="openDetail('rax-seilbahn')">
        <div class="card-header"><div class="card-icon extra-icon">üö°</div><div><div class="card-title">Rax-Seilbahn (fuori citt√†)</div><div class="card-subtitle">Funivia alpina ‚Ä¢ ~80 km</div></div></div>
        <p class="card-description">La funivia pi√π vicina a Vienna per panorami alpini (Hirschwang an der Rax). Gita di giornata.</p>
        <div class="card-info"><span class="tag" id="mode-rax-seilbahn">‚Äî</span><span class="distance" id="distance-rax-seilbahn">üìç Calcolo‚Ä¶</span></div>
      </article>
    </section>
  </div>

  <button class="floating-btn" onclick="openMap()" title="Apri mappa">üìç</button>
</div>

<!-- DETTAGLI (esempi gi√† presenti sopra per attrazioni/parking/electric) -->
<!-- Aggiungiamo dettagli extra essenziali per nuove voci -->
<div id="detail-donauturm" class="detail-page">
  <div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Donauturm</h2></div>
  <div class="detail-content">
    <img class="detail-image" src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=200&fit=crop" alt="Donauturm"/>
    <div class="detail-title">Donauturm</div>
    <div class="detail-subtitle">Torre panoramica ‚Ä¢ Donaupark</div>
    <p class="detail-text">Vista a 360¬∞ su Vienna; ascensori veloci e caff√® girevole.</p>
    <div class="grid">
      <div class="info"><div class="i">‚è∞</div><div>Orari variabili</div></div>
      <div class="info"><div class="i">üí∞</div><div>Biglietto</div></div>
      <div class="info"><div class="i">‚≠ê</div><div>4.5/5</div></div>
      <div class="info"><div class="i">üìç</div><div id="detail-distance-donauturm">Calcolo‚Ä¶</div></div>
    </div>
    <button class="go-btn" onclick="navigateSmart(48.24026,16.40938,'Donauturm')">üß≠ Come arrivare</button>
  </div>
</div>

<div id="detail-kahlenberg-park" class="detail-page">
  <div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Waldseilpark Kahlenberg</h2></div>
  <div class="detail-content">
    <img class="detail-image" src="https://images.unsplash.com/photo-1526546334624-2afe5b01088a?w=400&h=200&fit=crop" alt="Waldseilpark Kahlenberg"/>
    <div class="detail-title">Waldseilpark Kahlenberg</div>
    <div class="detail-subtitle">Parco avventura sugli alberi</div>
    <p class="detail-text">Divertimento tra le chiome con varie difficolt√†. Stagionale.</p>
    <div class="grid">
      <div class="info"><div class="i">‚è∞</div><div>Stagionale</div></div>
      <div class="info"><div class="i">üí∞</div><div>Biglietto</div></div>
      <div class="info"><div class="i">‚≠ê</div><div>4.4/5</div></div>
      <div class="info"><div class="i">üìç</div><div id="detail-distance-kahlenberg-park">Calcolo‚Ä¶</div></div>
    </div>
    <button class="go-btn" onclick="navigateSmart(48.27035,16.33339,'Waldseilpark Kahlenberg')">üß≠ Come arrivare</button>
  </div>
</div>

<div id="detail-rax-seilbahn" class="detail-page">
  <div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Rax-Seilbahn</h2></div>
  <div class="detail-content">
    <img class="detail-image" src="https://images.unsplash.com/photo-1520975693416-35a522e596d0?w=400&h=200&fit=crop" alt="Rax Seilbahn"/>
    <div class="detail-title">Rax-Seilbahn</div>
    <div class="detail-subtitle">Funivia ‚Ä¢ Hirschwang an der Rax (~80 km)</div>
    <p class="detail-text">Gita di una giornata per panorami alpini. Controlla meteo e orari prima di partire.</p>
    <div class="grid">
      <div class="info"><div class="i">‚è∞</div><div>Orari variabili</div></div>
      <div class="info"><div class="i">üí∞</div><div>Biglietto</div></div>
      <div class="info"><div class="i">üó∫Ô∏è</div><div>Fuori Vienna</div></div>
      <div class="info"><div class="i">üìç</div><div id="detail-distance-rax-seilbahn">Calcolo‚Ä¶</div></div>
    </div>
    <button class="go-btn" onclick="navigateSmart(47.70274,15.78037,'Rax-Seilbahn')">üß≠ Come arrivare</button>
  </div>
</div>

<!-- FOOD dettagli minimi (navigazione smart) -->
<div id="detail-figlmueller" class="detail-page"><div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Figlm√ºller B√§ckerstra√üe</h2></div><div class="detail-content"><img class="detail-image" src="https://images.unsplash.com/photo-1550547660-d9450f859349?w=400&h=200&fit=crop" alt="Schnitzel"/><div class="detail-title">Schnitzel iconico</div><div class="detail-subtitle">Centro</div><p class="detail-text">Prenota se possibile: molto richiesto.</p><div class="grid"><div class="info"><div class="i">‚≠ê</div><div>4.6/5</div></div><div class="info"><div class="i">üìç</div><div id="detail-distance-figlmueller">Calcolo‚Ä¶</div></div></div><button class="go-btn" onclick="navigateSmart(48.2089,16.3761,'Figlm√ºller B√§ckerstra√üe')">üß≠ Come arrivare</button></div></div>
<div id="detail-plachutta" class="detail-page"><div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Plachutta Wollzeile</h2></div><div class="detail-content"><img class="detail-image" src="https://images.unsplash.com/photo-1543332164-6e82f355bad2?w=400&h=200&fit=crop" alt="Tafelspitz"/><div class="detail-title">Tafelspitz</div><div class="detail-subtitle">Centro</div><p class="detail-text">Specialit√† viennesi in sala classica.</p><div class="grid"><div class="info"><div class="i">‚≠ê</div><div>4.5/5</div></div><div class="info"><div class="i">üìç</div><div id="detail-distance-plachutta">Calcolo‚Ä¶</div></div></div><button class="go-btn" onclick="navigateSmart(48.2080,16.3769,'Plachutta Wollzeile')">üß≠ Come arrivare</button></div></div>
<div id="detail-cafecentral" class="detail-page"><div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Caf√© Central</h2></div><div class="detail-content"><img class="detail-image" src="https://images.unsplash.com/photo-1561070791-2526d30994b5?w=400&h=200&fit=crop" alt="Cafe"/><div class="detail-title">Caff√® storico</div><div class="detail-subtitle">Ring</div><p class="detail-text">Torte classiche e atmosfera fin de si√®cle.</p><div class="grid"><div class="info"><div class="i">‚≠ê</div><div>4.6/5</div></div><div class="info"><div class="i">üìç</div><div id="detail-distance-cafecentral">Calcolo‚Ä¶</div></div></div><button class="go-btn" onclick="navigateSmart(48.2101,16.3647,'Caf√© Central')">üß≠ Come arrivare</button></div></div>
<div id="detail-mcd-stephansplatz" class="detail-page"><div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>McDonald's Stephansplatz</h2></div><div class="detail-content"><img class="detail-image" src="https://images.unsplash.com/photo-1550547660-d9450f859349?w=400&h=200&fit=crop" alt="Fast food"/><div class="detail-title">Fast food</div><div class="detail-subtitle">Centro</div><p class="detail-text">Opzione rapida in pieno centro.</p><div class="grid"><div class="info"><div class="i">‚≠ê</div><div>3.9/5</div></div><div class="info"><div class="i">üìç</div><div id="detail-distance-mcd-stephansplatz">Calcolo‚Ä¶</div></div></div><button class="go-btn" onclick="navigateSmart(48.2082,16.3725,'McDonald\'s Stephansplatz')">üß≠ Come arrivare</button></div></div>
<div id="detail-bk-prater" class="detail-page"><div class="detail-header"><button class="back-btn" onclick="closeDetail()">‚Üê</button><h2>Burger King ‚Äì Prater</h2></div><div class="detail-content"><img class="detail-image" src="https://images.unsplash.com/photo-1550547660-d9450f859349?w=400&h=200&fit=crop" alt="Fast food"/><div class="detail-title">Fast food</div><div class="detail-subtitle">Leopoldstadt</div><p class="detail-text">Vicino alla ruota panoramica.</p><div class="grid"><div class="info"><div class="i">‚≠ê</div><div>3.8/5</div></div><div class="info"><div class="i">üìç</div><div id="detail-distance-bk-prater">Calcolo‚Ä¶</div></div></div><button class="go-btn" onclick="navigateSmart(48.2167,16.3978,'Burger King Prater')">üß≠ Come arrivare</button></div></div>

<script>
  let userLocation=null;
  // POI principali
  const attractions={
    'stephansdom':{lat:48.20849,lng:16.37208},
    'schoenbrunn':{lat:48.18452,lng:16.31218},
    'belvedere':{lat:48.19112,lng:16.38005},
    'prater':{lat:48.21627,lng:16.39929},
    'mq':{lat:48.20387,lng:16.35854},
    'hundert':{lat:48.20703,lng:16.39213},
    // extra
    'donauturm':{lat:48.24026,lng:16.40938},
    'kahlenberg-park':{lat:48.27035,lng:16.33339},
    'rax-seilbahn':{lat:47.70274,lng:15.78037}
  };

  // Parcheggi/ricarica
  const points={
    'pr-erdberg':{lat:48.19279,lng:16.41385,type:'parkride'},
    'mq-garage':{lat:48.20358,lng:16.35820,type:'garage'},
    'wien-energie-rathaus':{lat:48.21350,lng:16.35723,type:'fast'},
    'garage-karteis':{lat:48.20566,lng:16.37043,type:'garage'},
    'tesla-vienna':{lat:48.18333,lng:16.33333,type:'fast'}
  };

  // Food
  const food={
    'figlmueller':{lat:48.2089,lng:16.3761,type:'tipico',stars:4.6},
    'plachutta':{lat:48.2080,lng:16.3769,type:'tipico',stars:4.5},
    'cafecentral':{lat:48.2101,lng:16.3647,type:'caff√®',stars:4.6},
    'mcd-stephansplatz':{lat:48.2082,lng:16.3725,type:'fast',stars:3.9},
    'bk-prater':{lat:48.2167,lng:16.3978,type:'fast',stars:3.8}
  };

  const debounce=(fn,d=200)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),d)}};
  const filterContentDeb=debounce(filterContent,200);

  // ====== METEO (Open-Meteo, nessuna chiave necessaria) ======
  async function fetchWeather(lat,lng){
    try{
      const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current_weather=true&hourly=temperature_2m,precipitation,weathercode&timezone=auto`;
      const r=await fetch(url);
      const j=await r.json();
      if(j.current_weather){
        const t=Math.round(j.current_weather.temperature);
        const w=j.current_weather.weathercode;
        document.getElementById('w-temp').textContent=t+'¬∞C';
        document.getElementById('w-desc').textContent=codeToDesc(w);
        document.getElementById('w-icon').textContent=codeToIcon(w);
      }
      // Next 8 ore
      const hourly=document.getElementById('hourly');
      hourly.innerHTML='';
      const times=j.hourly.time;const temps=j.hourly.temperature_2m;const prec=j.hourly.precipitation;const codes=j.hourly.weathercode;
      const now=new Date();
      let printed=0;
      for(let i=0;i<times.length && printed<12;i++){
        const ts=new Date(times[i]);
        if(ts>=now){
          const chip=document.createElement('div');chip.className='hchip';
          const hh=ts.getHours().toString().padStart(2,'0');
          chip.innerHTML=`<div>${hh}:00</div><div style="font-size:18px">${codeToIcon(codes[i])}</div><div>${Math.round(temps[i])}¬∞C</div><div style="font-size:11px">${prec[i]>0?prec[i].toFixed(1)+'mm':''}</div>`;
          hourly.appendChild(chip);printed++;
        }
      }
    }catch(e){
      document.getElementById('w-desc').textContent='Meteo non disponibile';
    }
  }
  function codeToDesc(c){
    const m={0:'Sereno',1:'Poco nuvoloso',2:'Variabile',3:'Nuvoloso',45:'Nebbia',48:'Brina',51:'Pioviggine',53:'Pioviggine',55:'Pioviggine forte',61:'Pioggia',63:'Pioggia',65:'Pioggia forte',71:'Neve',80:'Rovesci',95:'Temporale'};return m[c]||'Condizioni variabili'}
  function codeToIcon(c){
    if([0].includes(c))return '‚òÄÔ∏è';
    if([1,2].includes(c))return '‚õÖ';
    if([3,45,48].includes(c))return '‚òÅÔ∏è';
    if([51,53,55,61,63,65,80].includes(c))return 'üåßÔ∏è';
    if([71].includes(c))return 'üå®Ô∏è';
    if([95].includes(c))return '‚õàÔ∏è';
    return 'üå§Ô∏è';
  }

  // ====== GEO / DISTANZE ======
  function initializeGPS(){
    if(navigator.geolocation){
      setStatus('üîÑ Rilevamento posizione‚Ä¶','#ff9800');
      navigator.geolocation.getCurrentPosition((pos)=>{
        userLocation={lat:pos.coords.latitude,lng:pos.coords.longitude};
        setStatus('‚úÖ GPS attivo - Distanze precise','#4caf50');
        calcAll();
        fetchWeather(userLocation.lat,userLocation.lng);
      },(err)=>{handleGPSError(err)},{enableHighAccuracy:true,timeout:15000,maximumAge:600000});
    }else{
      setStatus('‚ö†Ô∏è GPS non supportato - uso distanze approssimative','#b91c1c');
      showApprox();
      // Meteo su Stephansplatz come fallback
      fetchWeather(48.20849,16.37208);
    }
  }
  function setStatus(text,color){const el=document.getElementById('location-status');el.style.color=color;el.textContent=text}
  function handleGPSError(error){
    const msgs={1:['üìç Accesso posizione negato','Abilita la localizzazione nel browser'],2:['üì° Posizione non disponibile','Spostati all\'aperto e riprova'],3:['‚è±Ô∏è Timeout','Riprova pi√π tardi']};
    const [m,d]=msgs[error.code]||['‚ö†Ô∏è Errore GPS','Problema sconosciuto'];
    document.getElementById('location-status').innerHTML=`<strong style="color:#b45309">${m}</strong><br><span style="color:#6b7280">${d}</span>`;
    showApprox();
    fetchWeather(48.20849,16.37208);
  }
  function calcAll(){if(!userLocation)return;[...Object.keys(attractions),...Object.keys(points),...Object.keys(food)].forEach(id=>{const coord=attractions[id]||points[id]||food[id];upd(id,dist(userLocation,coord));if(food[id])updMode(id)});['donauturm','kahlenberg-park','rax-seilbahn','prater'].forEach(id=>{const coord=attractions[id];if(coord)upd(id,dist(userLocation,coord));if(coord&&document.getElementById('mode-'+id))updMode(id)});}
  function dist(a,b){const R=6371,dLat=(b.lat-a.lat)*Math.PI/180,dLng=(b.lng-a.lng)*Math.PI/180;const c=2*Math.atan2(Math.sqrt(Math.sin(dLat/2)**2+Math.cos(a.lat*Math.PI/180)*Math.cos(b.lat*Math.PI/180)*Math.sin(dLng/2)**2),Math.sqrt(1-(Math.sin(dLat/2)**2+Math.cos(a.lat*Math.PI/180)*Math.cos(b.lat*Math.PI/180)*Math.sin(dLng/2)**2)));const km=R*c;return km<1?Math.round(km*1000)+'m':km.toFixed(1)+'km'}
  function upd(id,txt){const el=document.getElementById('distance-'+id);if(el)el.textContent='üìç '+txt;const el2=document.getElementById('detail-distance-'+id);if(el2)el2.textContent=txt;const extraIdMap={'prater':'prater-extra'};if(extraIdMap[id]){const elx=document.getElementById('distance-'+extraIdMap[id]);if(elx)elx.textContent='üìç '+txt}}

  // Suggerimento modalit√†
  function updMode(id){
    const coord=attractions[id]||food[id]||points[id];if(!coord||!userLocation)return;const km=toKm(dist(userLocation,coord));const tag=document.getElementById('mode-'+id);if(!tag)return;const mode=suggestMode(km);tag.className='tag '+mode.class;tag.textContent=mode.label;
  }
  function toKm(text){if(text.endsWith('m')){return parseInt(text)/1000}else{return parseFloat(text)}}
  function suggestMode(km){
    if(km<=1) return {label:'üö∂‚Äç‚ôÇÔ∏è A piedi',class:'walk'};
    if(km<=3) return {label:'üõ¥/üöá Monopattino o metro',class:'pt'};
    if(km<=12) return {label:'üöá/üöó Mezzi o auto',class:'pt'};
    return {label:'üöó Auto/treno (lontano)',class:'drive'};
  }

  // Navigazione smart (sceglie walking se <1km, altrimenti driving; l'utente pu√≤ passare alla metro dall'app Maps)
  function navigateSmart(lat,lng,name){
    const mode=(userLocation?(()=>{const km=toKm(dist(userLocation,{lat,lng}));return km<=1?'walking':'driving'})():'driving');
    navigateTo(lat,lng,name,mode);
  }

  function openDetail(id){const page=document.getElementById('detail-'+id);if(!page)return;history.pushState({detail:id},'',`#${id}`);page.classList.add('active');document.body.style.overflow='hidden';const coord=attractions[id]||points[id]||food[id];if(coord&&userLocation){upd(id,dist(userLocation,coord));updMode(id)}setTimeout(()=>{const btn=page.querySelector('.go-btn');if(btn){const r=btn.getBoundingClientRect();if(r.bottom>innerHeight)btn.scrollIntoView({behavior:'smooth',block:'end'})}},180)}
  function closeDetail(){document.querySelectorAll('.detail-page').forEach(p=>p.classList.remove('active'));document.body.style.overflow='auto';if(location.hash)history.replaceState(null,'',location.pathname)}

  function navigateTo(lat,lng,name,mode='walking'){
    const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);let url='';
    if(isIOS){url=`maps://?daddr=${lat},${lng}&dirflg=${mode==='driving'?'d':'w'}`}
    else{url=`https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=${mode}`}
    window.open(url);toast(`${mode==='driving'?'üöó':'üö∂‚Äç‚ôÇÔ∏è'} Navigazione verso ${name}`);
  }
  function toast(msg){const el=document.createElement('div');el.style.cssText='position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.82);color:#fff;padding:12px 18px;border-radius:12px;font-weight:600;z-index:2000';el.textContent=msg;document.body.appendChild(el);setTimeout(()=>el.remove(),1800)}

  function showTab(name,evt){['attractions','food','parking','electric','extra'].forEach(s=>document.getElementById(s+'-content').classList.add('hidden'));document.getElementById(name+'-content').classList.remove('hidden');document.querySelectorAll('.nav-tab').forEach(t=>{t.classList.remove('active');t.removeAttribute('aria-current')});evt.currentTarget.classList.add('active');evt.currentTarget.setAttribute('aria-current','page')}

  function filterByType(type,section,evt){const root=document.getElementById(section+'-content');evt.currentTarget.parentElement.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));evt.currentTarget.classList.add('active');const mapSel={attractions:'.attraction-card',food:'.food-card',parking:'.parking-card',electric:'.parking-card',extra:'.extra-card'};const selector=mapSel[section];root.querySelectorAll(selector).forEach(c=>{if(type==='all'){c.style.display='block';return;}const t=c.getAttribute('data-type');c.style.display=(t===type)?'block':'none'})}

  function filterContent(q,section){const root=document.getElementById(section+'-content');const mapSel={attractions:'.attraction-card',food:'.food-card',parking:'.parking-card',electric:'.parking-card',extra:'.extra-card'};const selector=mapSel[section];const s=(q||'').toLowerCase();root.querySelectorAll(selector).forEach(c=>{const t=c.querySelector('.card-title').textContent.toLowerCase();const d=c.querySelector('.card-description').textContent.toLowerCase();const sub=c.querySelector('.card-subtitle')?c.querySelector('.card-subtitle').textContent.toLowerCase():'';c.style.display=(t.includes(s)||d.includes(s)||sub.includes(s))?'block':'none'})}

  function openMap(){if(userLocation){window.open(`https://www.google.com/maps/search/vienna+attractions+restaurants+parking+ev/@${userLocation.lat},${userLocation.lng},13z`)}else{window.open('https://www.google.com/maps/search/vienna+attractions+restaurants+parking+ev/@48.20849,16.37208,13z')}}

  document.addEventListener('DOMContentLoaded',()=>{
    initializeGPS();
    window.addEventListener('popstate',(e)=>{const open=document.querySelector('.detail-page.active');if(open){closeDetail()}else if(e.state&&e.state.detail){openDetail(e.state.detail)}});
    if(location.hash){const id=location.hash.substring(1);if(document.getElementById('detail-'+id)){setTimeout(()=>openDetail(id),120)}}
    document.querySelectorAll('.card').forEach(c=>c.addEventListener('click',function(){if(!this.hasAttribute('onclick')){this.style.transform='scale(.98)';setTimeout(()=>this.style.transform='',150)}}));
  });
</script>
</body>
</html>
